# Test of stata.py module and methods
#
# Arjun Srinivasan, 08-13-2020
# 
import pandas as pd
import numpy as np
import econtools.metrics as mt
import sys
import os

sys.path.append("..")
from stata import Stata

def main():

    # constants passed into the stata methods
    my_dta = "./data/cpsmar08_10pct.dta"
    # my_csv = 
    # my_dta_url =
    # my_csv_url = 

    print("----------------------------------------------------------------------------------")
    print("Testing Stata.py functionality!")
    print("----------------------------------------------------------------------------------")

    print("----------------------------------------------------------------------------------")
    print("Initialize Stata object:")
    print("----------------------------------------------------------------------------------")
    stata = Stata()

    print("----------------------------------------------------------------------------------")
    print("Testing: load_stata ")
    print("----------------------------------------------------------------------------------")
    result = stata.use(my_dta)
    print("Result:", result[1])

    print("----------------------------------------------------------------------------------")
    print("Debug: show head of data in memory")
    print("----------------------------------------------------------------------------------")
    result = stata.debug_head()
    print(result)

    # print("----------------------------------------------------------------------------------")
    # print("Testing: clear")
    # print("----------------------------------------------------------------------------------")
    # resut = stata.clear()
    # print(result)

    # print("----------------------------------------------------------------------------------")
    # print("Debug: show head of data in memory")
    # print("----------------------------------------------------------------------------------")
    # result = stata.debug_head()
    # print(result)

    # print("----------------------------------------------------------------------------------")
    # print("Testing: load_csv ")
    # print("----------------------------------------------------------------------------------")


    # print("----------------------------------------------------------------------------------")
    # print("Testing: load_excel (.xlsx)")
    # print("----------------------------------------------------------------------------------")


    # print("----------------------------------------------------------------------------------")
    # print("Testing: load_excel (.xlsx)")
    # print("----------------------------------------------------------------------------------")

    # print("----------------------------------------------------------------------------------")
    # print("Testing: Summarize")
    # print("----------------------------------------------------------------------------------")

    print("----------------------------------------------------------------------------------")
    print("Testing: Describe")
    print("----------------------------------------------------------------------------------")
    result = stata.describe()
    print(result[1])

    print("----------------------------------------------------------------------------------")
    print("Testing: Describe with varlist")
    print("----------------------------------------------------------------------------------")
    result = stata.describe(['age', 'hhid'])
    print(result[1])

    print("----------------------------------------------------------------------------------")
    print("Testing: Mean")
    print("----------------------------------------------------------------------------------")
    result = stata.mean(['age', 'hhid'])
    print(result[1])

    # print("----------------------------------------------------------------------------------")
    # print("Testing: Summarize/Describe with Varlist")
    # print("----------------------------------------------------------------------------------")


    print("----------------------------------------------------------------------------------")
    print("Testing: reg")
    print("----------------------------------------------------------------------------------")
    result = stata.reg('wage_hr',['age', 'hhid'])
    print(result[1])






if __name__ == "__main__":
    main()